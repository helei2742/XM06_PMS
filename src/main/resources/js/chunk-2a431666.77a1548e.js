(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a431666"],{"102c":function(t,e,i){},4817:function(t,e,i){"use strict";i("d39e")},"5deb":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isClose?i("div",{staticClass:"show-window"},[i("el-row",{staticClass:"show-window-title"},[i("el-col",{attrs:{span:16}},[i("div",{staticClass:"hidden-sm-and-down"},[t._t("title")],2)]),i("el-col",{attrs:{offset:2,span:4}},[i("div",{staticClass:"light-tool"},[i("el-switch",{attrs:{value:t.lightType,"active-color":"#3c3f41","inactive-color":"#ffd04c","active-value":1,"inactive-value":0,"active-icon-class":"el-icon-moon","inactive-icon-class":"el-icon-sunny"},on:{change:function(e){return e.target!==e.currentTarget?null:t.colorModuleChange.apply(null,arguments)}}})],1)]),i("el-col",{staticClass:"show-window-button",attrs:{span:4}},[i("div",{staticClass:"el-icon-refresh",on:{click:t.reload}}),i("div",{staticClass:"el-icon-close",on:{click:t.close}})])],1),i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"show-window-main",style:t.bgcColor},[i("div",{staticStyle:{position:"relative","border-radius":"20px",padding:"10px 0"},style:t.slotAreaColor},[t._t("main")],2)])])],1)],1):t._e()},o=[],l=i("4ba1"),a={name:"ShowWindow",computed:{bgcColor:function(){return{backgroundColor:this.color[this.lightType].bgcColor}},slotAreaColor:function(){return{backgroundColor:this.color[this.lightType].slotAreaBgc}}},methods:{close:function(){this.isClose=!1},reload:function(){this.$forceUpdate()},colorModuleChange:function(t){this.lightType=t,this.$store.commit(l["b"],{colorModule:t})}},data:function(){return{lightType:0,isClose:!0,color:this.$store.getters.getColor}},activated:function(){this.lightType=this.$store.getters.getColorModule}},n=a,r=(i("85e3"),i("2877")),c=Object(r["a"])(n,s,o,!1,null,"31b52f1e",null);e["a"]=c.exports},"85e3":function(t,e,i){"use strict";i("102c")},d39e:function(t,e,i){},fc57:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("show-window",[i("div",{attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"el-icon-s-order"}),i("span",[t._v("人脸信息管理")]),i("i",{staticClass:"el-icon-arrow-right"}),i("span",[t._v("视频上传人脸信息")])]),i("div",{staticStyle:{padding:"10px 20px",height:"65vh"},attrs:{slot:"main"},slot:"main"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/",limit:1,"http-request":t.addUploadFile,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!0}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.mp4文件，且不超过10mb")])],1),t.percentVisible?i("el-progress",{staticStyle:{"margin-top":"20px"},attrs:{"text-inside":!0,"stroke-width":26,percentage:t.progressPercent,status:"success"}}):t._e(),t.percentVisible?i("el-button",{on:{click:t.trainFaceInfo}},[t._v("生成人脸信息")]):t._e()],1)])],1)},o=[],l=i("5deb"),a=i("f68f"),n={name:"UploadFileTORegister",data:function(){return{isHaveFile:!1,fileList:[],fileForm:null,percentVisible:!1,progressPercent:0,mp4SavePath:""}},components:{ShowWindow:l["a"]},methods:{addUploadFile:function(t){if("video/mp4"!==t.file.type)return this.$alert("请选择mp4类型文件"),void this.$refs.upload.clearFiles();this.isHaveFile=!0,this.fileForm=new FormData,this.fileForm.append("file",t.file)},submitUpload:function(){var t=this;if(null!=this.fileForm&&this.isHaveFile){this.percentVisible=!0;var e=function(e){t.progressPercent=e.loaded/e.total*100|0},i=this.$store.getters.getLoginUser.id;Object(a["d"])(i,this.fileForm,e).then((function(e){console.log(e),200===e.code?(t.$alert("上传保存成功，请点击下方生成按钮，生成您的人类信息"),t.mp4SavePath=e.result):t.$message.error("出错了",e.msg)}))}else this.$message.error("请先选择文件")},trainFaceInfo:function(){var t=this,e=this.$store.getters.getLoginUser.id,i=this.mp4SavePath;if(null!=i&&""!==i){var s=this.$loading({lock:!0,text:"正在解析视频分析人脸信息",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(a["c"])(e,i).then((function(e){console.log(e),200===e.code?(t.$message.success("人脸信息生成成功"),s.close()):(t.$alert("生成失败,"+e.msg),s.close())})).catch((function(e){t.$alert("出错啦,请稍后重试,或更换上传视频"),s.close()}))}else this.$alert("请先上传文件")},handleRemove:function(t,e){console.log(t,e),this.isHaveFile=!1,this.percentVisible=!1}}},r=n,c=(i("4817"),i("2877")),d=Object(c["a"])(r,s,o,!1,null,"4531c91f",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2a431666.77a1548e.js.map