(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60035c7e"],{"0c15":function(t,e,a){},"102c":function(t,e,a){},"22ac":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"show-task"},[a("show-window",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:"showTask",attrs:{"element-loading-text":"等待网络中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-s-order"}),a("span",[t._v("任务管理")]),a("i",{staticClass:"el-icon-arrow-right"}),a("span",[t._v("查看任务")])]),a("div",{attrs:{slot:"main"},slot:"main"},[a("div",{staticClass:"task-select"},[a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.typeChange(1)}}},[t._v("全部任务")])],1),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.typeChange(2)}}},[t._v("我发布的任务")])],1),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.typeChange(3)}}},[t._v("正在进行的任务")])],1),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.typeChange(4)}}},[t._v("已提交的任务")])],1),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.typeChange(7)}}},[t._v("未提交的任务")])],1),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.typeChange(5)}}},[t._v("过期的任务")])],1),a("div",[a("el-select",{attrs:{size:"mini",placeholder:"根据小组查询"},model:{value:t.queryGroup,callback:function(e){t.queryGroup=e},expression:"queryGroup"}},t._l(this.$store.getters.getJoinedGroup,(function(t){return a("el-option",{key:t.groupName,attrs:{label:t.groupName,value:t.id}})})),1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.typeChange(6)}}},[t._v("查询")])],1)]),a("el-row",{staticClass:"task-list-area"},[a("el-col",{attrs:{offset:1,xs:18,sm:18,md:18,lg:18,xl:15}},t._l(t.tasks,(function(e){return a("show-task-desc",{attrs:{task:e,"card-style":t.getShowTaskCardStyle},on:{submittask:t.submitTask,submitrecord:t.submitRecord,altertask:t.alterTask,droptask:t.dropTask}})})),1)],1),a("el-pagination",{ref:"pag",staticClass:"pagination",staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{"current-page":t.page,"page-size":t.limit,"pager-count":7,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)])],1)},s=[],r=(a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"show-task-desc",style:t.cardStyle},[a("el-descriptions",{attrs:{title:"任务详情",column:1}},[a("template",{slot:"extra"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.taskDetail(t.task)}}},[t._v(" 详情 ")]),a("el-dropdown",[a("el-button",{attrs:{type:"select",size:"mini"}},[t._v(" 更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-button",{attrs:{type:"success",icon:"el-icon-upload2",size:"small"},on:{click:function(e){return t.submitTask(t.task)}}},[t._v(" 提交任务 ")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-claim",size:"small"},on:{click:function(e){return t.submitRecord(t.task)}}},[t._v(" 提交记录 ")])],1),t.task.creatorId===this.$store.getters.getLoginUser.id?a("el-dropdown-item",[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"small"},on:{click:function(e){return t.alterTask(t.task)}}},[t._v(" 修改任务 ")])],1):t._e(),t.task.creatorId===this.$store.getters.getLoginUser.id?a("el-dropdown-item",[a("el-button",{attrs:{type:"danger",icon:"el-icon-edit",size:"small"},on:{click:function(e){return t.dropTask(t.task)}}},[t._v(" 删除任务 ")])],1):t._e()],1)],1)],1),a("el-descriptions-item",{attrs:{label:"任务名称"}},[t._v(t._s(t.task.taskName))]),a("el-descriptions-item",{attrs:{label:"任务要求"}},[a("span",{style:{whiteSpace:"pre-line"}},[t._v(t._s(t.task.description))])]),a("el-descriptions-item",{attrs:{label:"发布日期"}},[a("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.formatDate(t.task.createDate)))])],1),a("el-descriptions-item",{attrs:{label:"截止日期"}},[a("el-tag",{attrs:{type:t.getType}},[t._v(t._s(t.formatDate(t.task.deadline)+""+t.dateState))])],1),a("el-descriptions-item",{attrs:{label:"发布人用户名"}},[t._v(" "+t._s(t.task.creator.userName)+" ")]),a("el-descriptions-item",{attrs:{label:"发布人真实姓名"}},[t._v(" "+t._s(t.task.creator.trueName)+" ")]),a("el-descriptions-item",{attrs:{label:"发布人邮箱"}},[t._v(" "+t._s(t.task.creator.email)+" ")])],2)],1)}),i=[],o={name:"ShowTaskDesc",props:{task:{type:Object,default:function(){return null}},cardStyle:{type:Object,default:function(){return{backgroundColor:"#b6baba",color:"#202020"}}}},computed:{formatDate:function(){var t=this;return function(e){return t.$formatDate(e)}},getType:function(){return this.task.deadline-(new Date).getTime()<0?"danger":this.task.deadline-(new Date).getTime()<864e5?"warning":"success"},dateState:function(){return this.task.deadline-(new Date).getTime()<0?"(已过期)":this.task.deadline-(new Date).getTime()<864e5?"(不足一天)":""}},methods:{submitTask:function(t){t.deadline-(new Date).getTime()<0?this.$message.error("任务已过期，不能提交"):this.$emit("submittask",t)},taskDetail:function(t){this.$router.push({path:"/index/taskdetail",query:{task:t,taskId:t.id}})},submitRecord:function(t){this.$emit("submitrecord",t)},alterTask:function(t){this.$emit("altertask",t)},dropTask:function(t){this.$emit("droptask",t.id)}}},c=o,l=(a("fe1f"),a("2877")),u=Object(l["a"])(c,r,i,!1,null,"33f12646",null),d=u.exports,p=a("5deb"),h=(a("78de"),a("bd9c")),m=a("d86d"),f={name:"ShowTask",components:{ShowWindow:p["a"],ShowTaskDesc:d},computed:{getShowTaskCardStyle:function(){return this.$store.getters.getCardColorStyle}},data:function(){return{page:1,limit:6,tasks:[],total:0,creator:null,queryType:1,queryGroup:null,loading:!1}},methods:{pageQueryUserTask:function(t,e){var a=this,n=this.$store.getters.getLoginUser.id;this.loading=!0,Object(h["h"])(n,t,e,this.queryType,this.queryGroup).then((function(t){var e=t.result;200===t.code?(a.tasks=e.list,a.total=e.total):a.$message.error("出错了,"+t.msg)})).finally((function(){a.loading=!1}))},handleCurrentChange:function(t){this.pageQueryUserTask(t,this.limit)},typeChange:function(t){t===this.queryType&&6!==t||(6!==t||null!==this.queryGroup?(this.queryType=t,this.page=1,this.handleCurrentChange(this.page)):this.$alert("请选择小组"))},submitTask:function(t){this.$router.push({path:"/index/submittask",query:{task:t,taskId:t.id}})},submitRecord:function(t){this.$router.push({path:"/index/submitrecord",query:{taskName:t.taskName,taskId:t.id}})},alterTask:function(t){this.$router.push({path:"/index/altertask",query:{task:t,taskId:t.id}})},dropTask:function(t){var e=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password",inputPattern:/^[_0-9a-z]{6,16}$/,inputErrorMessage:"密码格式不正确"}).then((function(a){var n=a.value,s=e.$store.getters.getLoginUser.id;e.loading=!0,Object(h["e"])(t,s,n).then((function(t){200===t.code?e.$message.success("删除成功"):e.$alert("删除失败，"+t.msg)})).finally((function(){e.loading=!1}))})).catch((function(){e.$message({type:"info",message:"取消删除"})}))}},mounted:function(){this.pageQueryUserTask(this.page,this.limit),this.$store.dispatch(m["c"])}},g=f,k=(a("cbb2"),Object(l["a"])(g,n,s,!1,null,"429cb4d0",null));e["default"]=k.exports},"5deb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isClose?a("div",{staticClass:"show-window"},[a("el-row",{staticClass:"show-window-title"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"hidden-sm-and-down"},[t._t("title")],2)]),a("el-col",{attrs:{offset:2,span:4}},[a("div",{staticClass:"light-tool"},[a("el-switch",{attrs:{value:t.lightType,"active-color":"#3c3f41","inactive-color":"#ffd04c","active-value":1,"inactive-value":0,"active-icon-class":"el-icon-moon","inactive-icon-class":"el-icon-sunny"},on:{change:function(e){return e.target!==e.currentTarget?null:t.colorModuleChange.apply(null,arguments)}}})],1)]),a("el-col",{staticClass:"show-window-button",attrs:{span:4}},[a("div",{staticClass:"el-icon-refresh",on:{click:t.reload}}),a("div",{staticClass:"el-icon-close",on:{click:t.close}})])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"show-window-main",style:t.bgcColor},[a("div",{staticStyle:{position:"relative","border-radius":"20px",padding:"10px 0"},style:t.slotAreaColor},[t._t("main")],2)])])],1)],1):t._e()},s=[],r=a("4ba1"),i={name:"ShowWindow",computed:{bgcColor:function(){return{backgroundColor:this.color[this.lightType].bgcColor}},slotAreaColor:function(){return{backgroundColor:this.color[this.lightType].slotAreaBgc}}},methods:{close:function(){this.isClose=!1},reload:function(){this.$forceUpdate()},colorModuleChange:function(t){this.lightType=t,this.$store.commit(r["b"],{colorModule:t})}},data:function(){return{lightType:0,isClose:!0,color:this.$store.getters.getColor}},activated:function(){this.lightType=this.$store.getters.getColorModule}},o=i,c=(a("85e3"),a("2877")),l=Object(c["a"])(o,n,s,!1,null,"31b52f1e",null);e["a"]=l.exports},"85e3":function(t,e,a){"use strict";a("102c")},b114:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return l}));var n=a("bc3a"),s=a.n(n),r=a("1bab"),i=a("f121");function o(t){var e=s.a.create({timeout:5e3,withCredentials:!0});return e(t)}function c(t,e,a,n,s){return Object(r["a"])({url:"/task/submitTask",params:{userId:t,taskId:e,description:a},onUploadProgress:s,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n})}function l(t){return o({url:i["b"],params:{filePath:t},responseType:"blob",headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}})}},bd9c:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"h",(function(){return c})),a.d(e,"i",(function(){return l})),a.d(e,"j",(function(){return u})),a.d(e,"k",(function(){return d})),a.d(e,"l",(function(){return p})),a.d(e,"d",(function(){return h})),a.d(e,"c",(function(){return m})),a.d(e,"f",(function(){return f})),a.d(e,"g",(function(){return g}));a("b0c0");var n=a("1bab"),s=a("b114");function r(t){return Object(n["a"])({url:"/task/add",data:{taskName:t.name,groupId:t.groupId,deadline:t.date,description:t.desc,creatorId:t.creatorId},method:"post"})}function i(t){return Object(n["a"])({url:"/task/alterTask",data:t,method:"post"})}function o(t,e,a){return Object(n["a"])({url:"/task/dropTask",data:{id:t,creatorId:e,userPwd:a},method:"post"})}function c(t,e,a,s,r){return Object(n["a"])({url:"/task/pageQueryUserTask",data:{page:e,limit:a,userId:t,type:s,groupId:r},method:"post"})}function l(t){return Object(n["a"])({url:"/task/queryByTaskId",params:{taskId:t},method:"post"})}function u(t,e,a){return Object(n["a"])({url:"/task/taskSubmitRecord",data:{taskId:t,page:e,limit:a},method:"post"})}function d(t,e,a){return Object(n["a"])({url:"/task/userSubmitRecord",data:{userId:t,page:e,limit:a},method:"post"})}function p(t){return Object(n["a"])({url:"/task/queryTaskSubmitCharts",data:{taskId:t},method:"post"})}function h(t,e){return Object(n["a"])({url:"/task/deleteTaskSubmitRecord",data:{recordId:t,userId:e},method:"post"})}function m(t,e){return Object(n["a"])({url:"/task/deleteSelectedRecord",data:{recordIds:t,userId:e},method:"post"})}function f(t){return Object(s["a"])({url:"http://localhost:9000/XM06/task/exportMyRecordExcel",data:{userId:t},responseType:"blob",headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},method:"post"})}function g(t){return Object(s["a"])({url:"http://localhost:9000/XM06/task/exportTaskRecordExcel",data:{taskId:t},responseType:"blob",headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},method:"post"})}},cbb2:function(t,e,a){"use strict";a("f29f")},f29f:function(t,e,a){},fe1f:function(t,e,a){"use strict";a("0c15")}}]);
//# sourceMappingURL=chunk-60035c7e.114c6be9.js.map