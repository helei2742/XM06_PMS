(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3622c556"],{"04d1":function(t,e,r){var o=r("342f"),i=o.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"096b":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"alter-project"},[r("show-window",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[r("div",{attrs:{slot:"title"},slot:"title"},[r("i",{staticClass:"el-icon-s-finance"}),r("span",[t._v("项目管理")]),r("i",{staticClass:"el-icon-arrow-right"}),r("span",[t._v("修改项目信息")])]),r("div",{attrs:{slot:"main"},slot:"main"},[r("div",{staticStyle:{padding:"20px"}},[r("alter-project-form",{ref:"alterProjectForm",attrs:{"my-groups":t.myGroups,project:t.project},on:{alterProject:t.updateProject}})],1)])])],1)},i=[],c=(r("d3b7"),r("5deb")),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return null!=t.project?r("div",{staticClass:"alter-project-form"},[r("el-form",{ref:"form",attrs:{model:t.alterForm,rules:t.rules,"label-width":"80px",size:"mini"}},[r("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[r("el-input",{staticStyle:{width:"70%"},attrs:{disabled:t.disabledItem.name},model:{value:t.alterForm.projectName,callback:function(e){t.$set(t.alterForm,"projectName",e)},expression:"alterForm.projectName"}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:function(e){t.disabledItem.name=!t.disabledItem.name}}})],1),r("el-form-item",{attrs:{label:"是否公开"}},[r("el-switch",{attrs:{disabled:t.disabledItem.isPublic},model:{value:t.alterForm.isPublic,callback:function(e){t.$set(t.alterForm,"isPublic",e)},expression:"alterForm.isPublic"}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:function(e){t.disabledItem.isPublic=!t.disabledItem.isPublic}}})],1),r("el-form-item",{attrs:{label:"创建时间"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",disabled:!0},model:{value:t.alterForm.createDate,callback:function(e){t.$set(t.alterForm,"createDate",e)},expression:"alterForm.createDate"}})],1)],1),r("el-form-item",{attrs:{label:"负责小组"}},[r("el-transfer",{attrs:{filterable:"","filter-placeholder":"输入组名进行搜索","target-order":"push","button-texts":["移除","添加"],titles:["尚未加入的小组","已加入的小组"],data:t.allGroups},model:{value:t.selectGroups,callback:function(e){t.selectGroups=e},expression:"selectGroups"}})],1),r("el-form-item",{attrs:{label:"项目描述",prop:"projectDesc"}},[r("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:9},disabled:t.disabledItem.desc},model:{value:t.alterForm.projectDesc,callback:function(e){t.$set(t.alterForm,"projectDesc",e)},expression:"alterForm.projectDesc"}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:function(e){t.disabledItem.desc=!t.disabledItem.desc}}})],1),r("el-form-item",{attrs:{size:"large"}},[r("el-button",{attrs:{type:"primary",disabled:t.isEqual},on:{click:t.onSubmit}},[t._v(" 立即修改 ")]),r("el-button",{attrs:{disabled:t.isEqual},on:{click:function(e){return t.setAlterForm(t.project,t.myGroups)}}},[t._v(" 重置 ")])],1)],1)],1):t._e()},l=[],s=r("b85c"),a=(r("4e82"),{name:"AlterProjectForm",props:{project:{type:Object,default:function(){return null}},myGroups:{type:Array,default:function(){return null}}},data:function(){return{alterForm:{},disabledItem:{name:!0,isPublic:!0,desc:!0},selectGroups:[],allGroups:[],rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],projectDesc:[{required:!0,message:"请填写项目详情",trigger:"blur"}]}}},computed:{isEqual:function(){if(this.project.projectName!==this.alterForm.projectName)return!1;if(this.project.isPublic!==this.alterForm.isPublic)return!1;if(this.project.projectDesc!==this.alterForm.projectDesc)return!1;var t=this.project.groupList;if(this.selectGroups.length!==t.length)return!1;this.selectGroups.sort((function(t,e){return t-e})),t.sort((function(t,e){return t.id-e.id}));for(var e=0;e<this.selectGroups.length;e++)if(this.selectGroups[e]!==t[e].id)return!1;return!0}},methods:{setAlterForm:function(t,e){this.selectGroups=[],this.allGroups=[],this.alterForm=JSON.parse(JSON.stringify(t));var r,o=Object(s["a"])(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;this.allGroups.push({key:i.id,label:i.groupName})}}catch(u){o.e(u)}finally{o.f()}var c,n=this.alterForm.groupList,l=Object(s["a"])(n);try{for(l.s();!(c=l.n()).done;){var a=c.value;this.selectGroups.push(a.id)}}catch(u){l.e(u)}finally{l.f()}},onSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return console.log("error submit!!"),!1;var r={projectId:t.project.id,creatorId:t.$store.getters.getLoginUser.id,projectName:t.alterForm.projectName!==t.project.projectName?t.alterForm.projectName:null,projectDesc:t.alterForm.projectDesc!==t.project.projectDesc?t.alterForm.projectDesc:null,isPublic:t.alterForm.isPublic!==t.project.isPublic?t.alterForm.isPublic:null,groupIds:t.selectGroups};t.$emit("alterProject",r)}))}}}),u=a,d=r("2877"),p=Object(d["a"])(u,n,l,!1,null,"4915da0e",null),f=p.exports,m=r("33be"),h=r("78de"),b={name:"AlterProject",components:{AlterProjectForm:f,ShowWindow:c["a"]},data:function(){return{project:null,myGroups:null,loading:!1}},methods:{updateProject:function(t){var e=this;Object(m["p"])(t).then((function(t){200===t.code?e.$alert("修改成功"):e.$alert("修改失败,"+t.msg)}))}},activated:function(){var t=this,e=this.$store.getters.getLoginUser.id,r=this.$route.query.projectId,o=this.$route.query.project;void 0===o.id?(this.loading=!0,Object(m["m"])(r).then((function(r){return 200===r.code?t.project=r.result:t.$alert("网络请求数据失败"),Object(h["l"])(e)})).then((function(e){200===e.code?(t.myGroups=e.result,t.$refs.alterProjectForm.setAlterForm(t.project,t.myGroups)):t.$alert("网络请求数据失败")})).finally((function(){t.loading=!1}))):(this.project=o,Object(h["l"])(e).then((function(e){200===e.code?(t.myGroups=e.result,t.$refs.alterProjectForm.setAlterForm(o,t.myGroups)):t.$alert("网络请求数据失败")})))}},j=b,g=Object(d["a"])(j,o,i,!1,null,"012e48c0",null);e["default"]=g.exports},"102c":function(t,e,r){},"33be":function(t,e,r){"use strict";r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return c})),r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return l})),r.d(e,"f",(function(){return s})),r.d(e,"h",(function(){return a})),r.d(e,"g",(function(){return u})),r.d(e,"e",(function(){return d})),r.d(e,"i",(function(){return p})),r.d(e,"n",(function(){return f})),r.d(e,"o",(function(){return m})),r.d(e,"m",(function(){return h})),r.d(e,"l",(function(){return b})),r.d(e,"p",(function(){return j})),r.d(e,"k",(function(){return g})),r.d(e,"j",(function(){return v}));var o=r("1bab"),i=1,c=2,n=3,l=4,s=1,a=2,u=3,d=4;function p(t){return console.log(t),Object(o["a"])({url:"/project/create",data:{projectName:t.projectName,groupIds:t.groups,isPublic:t.isPublic,projectDesc:t.desc,groupId:t.groupId,creatorId:t.creatorId},method:"post"})}function f(t){return Object(o["a"])({url:"/project/queryProjectList",data:t,method:"post"})}function m(t,e){return Object(o["a"])({url:"/project/submitProjectDegree",data:t,onUploadProgress:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"post"})}function h(t){return Object(o["a"])({url:"/project/queryById",data:{projectId:t},method:"post"})}function b(t,e,r){return Object(o["a"])({url:"/project/pageQueryRecordList",data:{projectId:t,page:e,limit:r},method:"post"})}function j(t){return Object(o["a"])({url:"/project/updateProject",data:{id:t.projectId,creatorId:t.creatorId,projectDesc:t.projectDesc,projectName:t.projectName,isPublic:t.isPublic,groupIds:t.groupIds},method:"post"})}function g(t,e){return Object(o["a"])({url:"/project/deleteProject",data:{userId:t,projectId:e},method:"post"})}function v(t,e){return Object(o["a"])({url:"/project/deleteConfirm",data:{projectId:t,checkCode:e},method:"post"})}},"4e82":function(t,e,r){"use strict";var o=r("23e7"),i=r("59ed"),c=r("7b0b"),n=r("50c4"),l=r("577e"),s=r("d039"),a=r("addb"),u=r("a640"),d=r("04d1"),p=r("d998"),f=r("2d00"),m=r("512ce"),h=[],b=h.sort,j=s((function(){h.sort(void 0)})),g=s((function(){h.sort(null)})),v=u("sort"),y=!s((function(){if(f)return f<70;if(!(d&&d>3)){if(p)return!0;if(m)return m<603;var t,e,r,o,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(o=0;o<47;o++)h.push({k:e+o,v:r})}for(h.sort((function(t,e){return e.v-t.v})),o=0;o<h.length;o++)e=h[o].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),w=j||!g||!v||!y,F=function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:l(e)>l(r)?1:-1}};o({target:"Array",proto:!0,forced:w},{sort:function(t){void 0!==t&&i(t);var e=c(this);if(y)return void 0===t?b.call(e):b.call(e,t);var r,o,l=[],s=n(e.length);for(o=0;o<s;o++)o in e&&l.push(e[o]);l=a(l,F(t)),r=l.length,o=0;while(o<r)e[o]=l[o++];while(o<s)delete e[o++];return e}})},"512ce":function(t,e,r){var o=r("342f"),i=o.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},"5deb":function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isClose?r("div",{staticClass:"show-window"},[r("el-row",{staticClass:"show-window-title"},[r("el-col",{attrs:{span:16}},[r("div",{staticClass:"hidden-sm-and-down"},[t._t("title")],2)]),r("el-col",{attrs:{offset:2,span:4}},[r("div",{staticClass:"light-tool"},[r("el-switch",{attrs:{value:t.lightType,"active-color":"#3c3f41","inactive-color":"#ffd04c","active-value":1,"inactive-value":0,"active-icon-class":"el-icon-moon","inactive-icon-class":"el-icon-sunny"},on:{change:function(e){return e.target!==e.currentTarget?null:t.colorModuleChange.apply(null,arguments)}}})],1)]),r("el-col",{staticClass:"show-window-button",attrs:{span:4}},[r("div",{staticClass:"el-icon-refresh",on:{click:t.reload}}),r("div",{staticClass:"el-icon-close",on:{click:t.close}})])],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"show-window-main",style:t.bgcColor},[r("div",{staticStyle:{position:"relative","border-radius":"20px",padding:"10px 0"},style:t.slotAreaColor},[t._t("main")],2)])])],1)],1):t._e()},i=[],c=r("4ba1"),n={name:"ShowWindow",computed:{bgcColor:function(){return{backgroundColor:this.color[this.lightType].bgcColor}},slotAreaColor:function(){return{backgroundColor:this.color[this.lightType].slotAreaBgc}}},methods:{close:function(){this.isClose=!1},reload:function(){this.$forceUpdate()},colorModuleChange:function(t){this.lightType=t,this.$store.commit(c["b"],{colorModule:t})}},data:function(){return{lightType:0,isClose:!0,color:this.$store.getters.getColor}},activated:function(){this.lightType=this.$store.getters.getColorModule}},l=n,s=(r("85e3"),r("2877")),a=Object(s["a"])(l,o,i,!1,null,"31b52f1e",null);e["a"]=a.exports},"85e3":function(t,e,r){"use strict";r("102c")},a640:function(t,e,r){"use strict";var o=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&o((function(){r.call(null,e||function(){throw 1},1)}))}},addb:function(t,e){var r=Math.floor,o=function(t,e){var n=t.length,l=r(n/2);return n<8?i(t,e):c(o(t.slice(0,l),e),o(t.slice(l),e),e)},i=function(t,e){var r,o,i=t.length,c=1;while(c<i){o=c,r=t[c];while(o&&e(t[o-1],r)>0)t[o]=t[--o];o!==c++&&(t[o]=r)}return t},c=function(t,e,r){var o=t.length,i=e.length,c=0,n=0,l=[];while(c<o||n<i)c<o&&n<i?l.push(r(t[c],e[n])<=0?t[c++]:e[n++]):l.push(c<o?t[c++]:e[n++]);return l};t.exports=o},d998:function(t,e,r){var o=r("342f");t.exports=/MSIE|Trident/.test(o)}}]);
//# sourceMappingURL=chunk-3622c556.092581e5.js.map