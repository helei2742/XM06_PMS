(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85688a76"],{"102c":function(e,t,r){},2331:function(e,t,r){"use strict";r("f007")},"2ff4":function(e,t,r){"use strict";r("8ac5")},"33be":function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return c})),r.d(t,"f",(function(){return s})),r.d(t,"h",(function(){return a})),r.d(t,"g",(function(){return u})),r.d(t,"e",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"n",(function(){return h})),r.d(t,"o",(function(){return f})),r.d(t,"m",(function(){return y})),r.d(t,"l",(function(){return m})),r.d(t,"p",(function(){return g})),r.d(t,"k",(function(){return j})),r.d(t,"j",(function(){return v}));var o=r("1bab"),i=1,l=2,n=3,c=4,s=1,a=2,u=3,d=4;function p(e){return console.log(e),Object(o["a"])({url:"/project/create",data:{projectName:e.projectName,groupIds:e.groups,isPublic:e.isPublic,projectDesc:e.desc,groupId:e.groupId,creatorId:e.creatorId},method:"post"})}function h(e){return Object(o["a"])({url:"/project/queryProjectList",data:e,method:"post"})}function f(e,t){return Object(o["a"])({url:"/project/submitProjectDegree",data:e,onUploadProgress:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"post"})}function y(e){return Object(o["a"])({url:"/project/queryById",data:{projectId:e},method:"post"})}function m(e,t,r){return Object(o["a"])({url:"/project/pageQueryRecordList",data:{projectId:e,page:t,limit:r},method:"post"})}function g(e){return Object(o["a"])({url:"/project/updateProject",data:{id:e.projectId,creatorId:e.creatorId,projectDesc:e.projectDesc,projectName:e.projectName,isPublic:e.isPublic,groupIds:e.groupIds},method:"post"})}function j(e,t){return Object(o["a"])({url:"/project/deleteProject",data:{userId:e,projectId:t},method:"post"})}function v(e,t){return Object(o["a"])({url:"/project/deleteConfirm",data:{projectId:e,checkCode:t},method:"post"})}},"5deb":function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isClose?r("div",{staticClass:"show-window"},[r("el-row",{staticClass:"show-window-title"},[r("el-col",{attrs:{span:16}},[r("div",{staticClass:"hidden-sm-and-down"},[e._t("title")],2)]),r("el-col",{attrs:{offset:2,span:4}},[r("div",{staticClass:"light-tool"},[r("el-switch",{attrs:{value:e.lightType,"active-color":"#3c3f41","inactive-color":"#ffd04c","active-value":1,"inactive-value":0,"active-icon-class":"el-icon-moon","inactive-icon-class":"el-icon-sunny"},on:{change:function(t){return t.target!==t.currentTarget?null:e.colorModuleChange.apply(null,arguments)}}})],1)]),r("el-col",{staticClass:"show-window-button",attrs:{span:4}},[r("div",{staticClass:"el-icon-refresh",on:{click:e.reload}}),r("div",{staticClass:"el-icon-close",on:{click:e.close}})])],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"show-window-main",style:e.bgcColor},[r("div",{staticStyle:{position:"relative","border-radius":"20px",padding:"10px 0"},style:e.slotAreaColor},[e._t("main")],2)])])],1)],1):e._e()},i=[],l=r("4ba1"),n={name:"ShowWindow",computed:{bgcColor:function(){return{backgroundColor:this.color[this.lightType].bgcColor}},slotAreaColor:function(){return{backgroundColor:this.color[this.lightType].slotAreaBgc}}},methods:{close:function(){this.isClose=!1},reload:function(){this.$forceUpdate()},colorModuleChange:function(e){this.lightType=e,this.$store.commit(l["b"],{colorModule:e})}},data:function(){return{lightType:0,isClose:!0,color:this.$store.getters.getColor}},activated:function(){this.lightType=this.$store.getters.getColorModule}},c=n,s=(r("85e3"),r("2877")),a=Object(s["a"])(c,o,i,!1,null,"31b52f1e",null);t["a"]=a.exports},"85e3":function(e,t,r){"use strict";r("102c")},"8ac5":function(e,t,r){},a5e0:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-list"},[r("show-window",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:"projectList",attrs:{"element-loading-text":"加载数据中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("i",{staticClass:"el-icon-s-finance"}),r("span",[e._v("项目管理")]),r("i",{staticClass:"el-icon-arrow-right"}),r("span",[e._v("项目列表")])]),r("div",{attrs:{slot:"main"},slot:"main"},[r("div",{staticClass:"project-list-select"},[r("div",[r("el-button",{attrs:{type:this.queryType===e.allQueryType.userCreateProject?"success":"primary",size:"mini"},on:{click:function(t){return e.handleTypeChange(e.allQueryType.userCreateProject)}}},[e._v("我创建的项目")])],1),r("div",[r("el-button",{attrs:{type:this.queryType===e.allQueryType.joinedGroupProject?"success":"primary",size:"mini"},on:{click:function(t){return e.handleTypeChange(e.allQueryType.joinedGroupProject)}}},[e._v("我加入小组的项目")])],1),r("div",[r("el-button",{attrs:{type:this.queryType===e.allQueryType.publicProject?"success":"primary",size:"mini"},on:{click:function(t){return e.handleTypeChange(e.allQueryType.publicProject)}}},[e._v("查看公开的项目")])],1),r("div",[r("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},[r("el-option",{attrs:{label:"创建时间降序",value:e.allSortType.createDateDesc}}),r("el-option",{attrs:{label:"创建时间升序",value:e.allSortType.createDateAsc}}),r("el-option",{attrs:{label:"完成度降序",value:e.allSortType.completionDegreeDesc}}),r("el-option",{attrs:{label:"完成度升序",value:e.allSortType.completionDegreeAsc}})],1),r("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.handleOrderType}},[e._v("排序")])],1),r("div",[r("el-input",{staticStyle:{width:"65%"},attrs:{placeholder:"请输入项目名称",size:"mini"},model:{value:e.queryProjectName,callback:function(t){e.queryProjectName=t},expression:"queryProjectName"}}),r("el-button",{attrs:{type:this.queryType===e.allQueryType.nameLikeProject?"success":"primary",size:"mini"},on:{click:function(t){return e.handleTypeChange(e.allQueryType.nameLikeProject)}}},[e._v("查找")])],1)]),r("el-row",{staticClass:"project-list-area"},[r("el-col",{attrs:{offset:1,xs:22,sm:18,md:18,lg:18,xl:15}},[e.isShowPublicBtn?r("div",{staticStyle:{position:"absolute",right:"20px"}},[r("el-switch",{attrs:{offset:18,"active-text":"所有项目","inactive-text":"私有项目"},on:{change:e.handleIsShowAll},model:{value:e.isShowAll,callback:function(t){e.isShowAll=t},expression:"isShowAll"}})],1):e._e(),null==e.projectList||0===e.projectList.length?r("div",{staticStyle:{width:"100%",height:"500px"}},[r("el-empty",[r("div",{attrs:{slot:"description"},slot:"description"},[e._v("没有项目？改变筛选条件，或点击下方")]),r("el-button",{attrs:{type:"info",size:"mini",round:""},on:{click:e.toCreateProjectPage}},[e._v("创建项目")])],1)],1):e._e(),r("project-list-card",{attrs:{"card-style":e.getProjectListCardStyle,"project-list":e.projectList},on:{deleteProject:e.deleteProject}})],1)],1),r("el-row",[r("div",{staticClass:"block"},[r("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{"current-page":e.currentPage,"pager-count":7,"page-size":e.limit,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)])],1)]),r("el-dialog",{attrs:{title:"删除"+e.currentDelete,visible:e.deleteProjectVisible,width:"320px",center:""},on:{"update:visible":function(t){e.deleteProjectVisible=t}}},[r("span",[e._v("已向邮箱发送验证码,请在5分钟内输入")]),r("el-input",{attrs:{type:"text",placeholder:"请输入验证码",maxlength:"6","show-word-limit":""},model:{value:e.checkCode,callback:function(t){e.checkCode=t},expression:"checkCode"}}),r("el-slider",{attrs:{max:60,disabled:""},model:{value:e.checkTime,callback:function(t){e.checkTime=t},expression:"checkTime"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.deleteProjectVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",disabled:6!==e.checkCode.length},on:{click:e.handleDeleteConfirm}},[e._v(" 确 定 ")])],1)],1)],1)},i=[],l=r("b85c"),n=(r("d3b7"),r("5deb")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-list-card"},e._l(e.projectList,(function(t){return r("div",{staticClass:"project-list-card-item"},[r("el-card",{staticClass:"box-card",attrs:{shadow:"hover","body-style":e.cardStyle}},[r("div",{staticClass:"clearfix",staticStyle:{padding:"20px 10px"},style:e.cardStyle,attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"project-title"},[e._v(e._s(t.projectName))]),r("div",{staticStyle:{float:"right","margin-left":"10px"}},[r("el-dropdown",[r("span",{staticClass:"el-dropdown-link"},[r("el-button",{staticClass:"setting-button",attrs:{icon:"el-icon-setting"}})],1),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("span",{on:{click:function(r){return e.toAlterProject(t)}}},[e._v(" 修改项目信息 ")])]),r("el-dropdown-item",[r("span",{staticStyle:{color:"#ff0000"},on:{click:function(r){return e.deleteProject(t)}}},[e._v("删除项目")])])],1)],1)],1),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(r){return e.toProjectDetail(t)}}},[e._v(" 查看详情 ")])],1),r("div",{style:e.cardStyle},[r("el-descriptions",{attrs:{title:"",border:"",column:1,"label-style":e.cardStyle,"content-style":e.cardStyle}},[r("el-descriptions-item",{attrs:{label:"项目描述"}},[r("span",{style:{whiteSpace:"pre-line"}},[e._v(" "+e._s(t.projectDesc)+" ")])]),r("el-descriptions-item",{attrs:{label:"创建日期"}},[e._v(" "+e._s(e.formatDate(t.createDate))+" ")]),r("el-descriptions-item",{attrs:{label:"参与小组"}},[r("el-dropdown",[r("el-button",{attrs:{type:"primary"}},[e._v(" 鼠标悬浮查看"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.groupList,(function(t){return r("el-dropdown-item",[r("span",{on:{click:function(r){return e.toGroupDetail(t)}}},[e._v(e._s(t.groupName))])])})),1)],1)],1)],1)],1),r("div",{staticStyle:{"margin-top":"20px"}},[e._v(" 项目完成度： "),r("el-progress",{attrs:{percentage:Math.floor(100*t.completionDegree),color:e.customColorMethod(100*t.completionDegree)}},[e._v("npm run s ")])],1)])],1)})),0)},s=[],a={name:"ProjectListCard",props:{projectList:{type:Array,default:[]},cardStyle:{type:Object,default:{backgroundColor:"#b6baba",color:"#202020"}}},computed:{formatDate:function(){var e=this;return function(t){return e.$formatDate(t)}}},methods:{customColorMethod:function(e){return e<30?"#ff0000":e<70?"#e6a23c":"#67c23a"},toProjectDetail:function(e){console.log(e),this.$router.push({path:"/index/projectdetail",query:{project:e,projectId:e.id}})},toAlterProject:function(e){this.$router.push({path:"/index/alterproject",query:{project:e,projectId:e.id}})},toGroupDetail:function(e){this.$router.push({path:"/index/groupdetail",query:{group:e,groupName:e.groupName}})},deleteProject:function(e){this.$emit("deleteProject",e)}}},u=a,d=(r("2ff4"),r("2877")),p=Object(d["a"])(u,c,s,!1,null,"0f1c71bc",null),h=p.exports,f=r("33be"),y={name:"ProjectList",components:{ProjectListCard:h,ShowWindow:n["a"]},data:function(){return{allQueryType:{userCreateProject:f["f"],publicProject:f["g"],joinedGroupProject:f["h"],nameLikeProject:f["e"]},allSortType:{createDateDesc:f["d"],createDateAsc:f["c"],completionDegreeDesc:f["b"],completionDegreeAsc:f["a"]},queryType:0,orderType:1,isShowAll:!0,queryProjectName:"",projectList:[],privateList:[],allList:[],currentPage:1,limit:6,total:0,createProjectPath:"/index/createproject",loading:!1,deleteProjectVisible:!1,checkCode:"",checkTime:60,timer:null,currentDelete:null,currentDeleteId:-1}},computed:{isShowPublicBtn:function(){return 3!==this.queryType},getProjectListCardStyle:function(){return this.$store.getters.getCardColorStyle}},methods:{projectListDataFilter:function(e){if(!(null==this.allList||this.allList.length<=0))if(e)this.projectList=this.allList;else{if(null==this.privateList||this.privateList.length<=0){var t,r=Object(l["a"])(this.allList);try{for(r.s();!(t=r.n()).done;){var o=t.value;!1===o.isPublic&&this.privateList.push(o)}}catch(i){r.e(i)}finally{r.f()}}this.projectList=this.privateList}},handleIsShowAll:function(e){this.projectListDataFilter(e)},handleCurrentChange:function(e){this.privateList=[],this.allList=[],this.currentPage=e,this.queryProjectList(this.queryType)},handleTypeChange:function(e){if(e===this.allQueryType.nameLikeProject){if(null==this.queryProjectName||""===this.queryProjectName)return void this.$message.warning("请输入项目名称")}else if(e===this.queryType)return;this.currentPage=1,this.queryType=e,this.privateList=[],this.allList=[],this.isShowAll=!0,this.queryProjectList(e)},handleOrderType:function(){this.currentPage=1,this.privateList=[],this.allList=[],this.isShowAll=!0,this.queryProjectList(this.queryType)},queryProjectList:function(e){var t=this,r={};r.userId=this.$store.getters.getLoginUser.id,r.type=e,r.limit=this.limit,r.page=this.currentPage,r.orderType=this.orderType,r.projectName=this.queryProjectName,this.loading=!0,Object(f["n"])(r).then((function(e){if(console.log(e),200===e.code){var r=e.result;t.allList=r.list,t.total=r.total,t.projectListDataFilter(t.isShowAll)}else t.$message.error("查询项目列表失败,"+e.msg)})).finally((function(){t.loading=!1}))},toCreateProjectPage:function(){this.$router.push(this.createProjectPath)},handleDeleteConfirm:function(){var e=this;Object(f["j"])(this.currentDeleteId,this.checkCode).then((function(t){200===t.code?(e.$alert("删除项目信息成功"),e.deleteProjectVisible=!1):e.$alert("删除项目信息失败，"+t.msg)})).finally((function(){e.resetDelete()}))},deleteProject:function(e){var t=this,r=this.$store.getters.getLoginUser.id;r===e.creatorId?this.currentDelete!==e.projectName||null===this.timer?(this.currentDelete=e.projectName,this.currentDeleteId=e.id,this.resetDelete(),Object(f["k"])(r,e.id).then((function(e){console.log(e),200===e.code?t.timer=setInterval((function(){t.checkTime--,t.checkTime<=0&&(clearInterval(t.timer),t.timer=null,console.log(t.timer))}),1e3):t.$alert("出错了，"+e.msg)})),this.deleteProjectVisible=!0):this.deleteProjectVisible=!0:this.$alert("只有项目创建者才能执行此操作")},resetDelete:function(){clearInterval(this.timer),this.checkCode="",this.timer=null,this.checkTime=300}}},m=y,g=(r("2331"),Object(d["a"])(m,o,i,!1,null,"206e3d2b",null));t["default"]=g.exports},f007:function(e,t,r){}}]);
//# sourceMappingURL=chunk-85688a76.efebf99e.js.map