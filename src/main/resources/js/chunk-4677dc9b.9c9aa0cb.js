(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4677dc9b"],{"102c":function(t,e,r){},"5deb":function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isClose?r("div",{staticClass:"show-window"},[r("el-row",{staticClass:"show-window-title"},[r("el-col",{attrs:{span:16}},[r("div",{staticClass:"hidden-sm-and-down"},[t._t("title")],2)]),r("el-col",{attrs:{offset:2,span:4}},[r("div",{staticClass:"light-tool"},[r("el-switch",{attrs:{value:t.lightType,"active-color":"#3c3f41","inactive-color":"#ffd04c","active-value":1,"inactive-value":0,"active-icon-class":"el-icon-moon","inactive-icon-class":"el-icon-sunny"},on:{change:function(e){return e.target!==e.currentTarget?null:t.colorModuleChange.apply(null,arguments)}}})],1)]),r("el-col",{staticClass:"show-window-button",attrs:{span:4}},[r("div",{staticClass:"el-icon-refresh",on:{click:t.reload}}),r("div",{staticClass:"el-icon-close",on:{click:t.close}})])],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"show-window-main",style:t.bgcColor},[r("div",{staticStyle:{position:"relative","border-radius":"20px",padding:"10px 0"},style:t.slotAreaColor},[t._t("main")],2)])])],1)],1):t._e()},s=[],i=r("4ba1"),a={name:"ShowWindow",computed:{bgcColor:function(){return{backgroundColor:this.color[this.lightType].bgcColor}},slotAreaColor:function(){return{backgroundColor:this.color[this.lightType].slotAreaBgc}}},methods:{close:function(){this.isClose=!1},reload:function(){this.$forceUpdate()},colorModuleChange:function(t){this.lightType=t,this.$store.commit(i["b"],{colorModule:t})}},data:function(){return{lightType:0,isClose:!0,color:this.$store.getters.getColor}},activated:function(){this.lightType=this.$store.getters.getColorModule}},l=a,n=(r("85e3"),r("2877")),c=Object(n["a"])(l,o,s,!1,null,"31b52f1e",null);e["a"]=c.exports},"85e3":function(t,e,r){"use strict";r("102c")},c1ec:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return null!==t.group?r("div",{staticClass:"group-detail"},[r("show-window",{key:"groupDetail"},[r("div",{attrs:{slot:"title"},slot:"title"},[r("i",{staticClass:"el-icon-s-custom"}),r("span",[t._v("小组管理")]),r("i",{staticClass:"el-icon-arrow-right"}),r("span",[t._v("我加入的小组")]),r("i",{staticClass:"el-icon-arrow-right"}),r("span",[t._v(t._s(t.group.groupName))])]),r("div",{staticStyle:{padding:"30px 15px"},attrs:{slot:"main"},slot:"main"},[t.isManager?r("div",{staticStyle:{"text-align":"right","margin-bottom":"20px"}},[r("el-tooltip",{attrs:{effect:"dark",content:"修改小组信息",placement:"bottom-end"}},[r("el-button",{attrs:{circle:"",icon:"el-icon-edit"},on:{click:function(e){t.dialogFormVisible=!0}}})],1)],1):t._e(),r("el-descriptions",{attrs:{column:1,border:"","label-style":{width:"20%",backgroundColor:t.cardStyle.backgroundColor,color:t.cardStyle.color},"content-style":t.cardStyle}},[r("template",{slot:"title"},[r("span",{style:{color:t.cardStyle.color}},[t._v("小组信息")])]),r("template",{slot:"extra"},[t.isManager?r("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.getInvitationCode(t.group.id)}}},[t._v(" 获取小组邀请码 ")]):t._e()],1),r("el-descriptions-item",{attrs:{label:"小组名"}},[t._v(t._s(t.group.groupName))]),r("el-descriptions-item",{attrs:{label:"组长用户名"}},[t._v(t._s(t.group.manager.userName))]),r("el-descriptions-item",{attrs:{label:"组长真实姓名"}},[t._v(t._s(t.group.manager.trueName))]),r("el-descriptions-item",{attrs:{label:"创建日期"}},[r("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.formatDate(t.group.createDate)))])],1),r("el-descriptions-item",{attrs:{label:"小组描述"}},[r("span",{staticStyle:{"white-space":"pre-line"}},[t._v(t._s(t.group.described))])])],2),r("hr"),r("br"),r("br"),r("el-descriptions",{staticClass:"margin-top",attrs:{"label-style":t.cardStyle,"content-style":t.cardStyle,border:"",column:3}},[r("template",{slot:"title"},[r("span",{style:{color:t.cardStyle.color}},[t._v("组长信息")])]),r("template",{slot:"extra"},[t.isManager?r("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.dissolveGroup}},[t._v(" 解散小组 ")]):t._e()],1),r("el-descriptions-item",{attrs:{label:"用户名"}},[t._v(t._s(t.group.manager.userName))]),r("el-descriptions-item",{attrs:{label:"真实姓名"}},[t._v(t._s(t.group.manager.trueName))]),r("el-descriptions-item",{attrs:{label:"手机号"}},[t._v(t._s(t.group.manager.phone))]),r("el-descriptions-item",{attrs:{label:"邮箱"}},[r("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.group.manager.email))])],1),r("el-descriptions-item",{attrs:{label:"创建日期"}},[t._v(t._s(t.formatDate(t.group.manager.createDate)))])],2),r("hr"),r("br"),r("br"),r("span",{style:{color:t.cardStyle.color}},[t._v("成员信息")]),t._l(t.group.memberList,(function(e,o){return r("el-descriptions",{attrs:{"label-style":t.cardStyle,"content-style":t.cardStyle,column:3,border:""}},[r("template",{slot:"title"},[r("span",{style:{color:t.cardStyle.color}},[t._v("成员"+t._s(o+1))])]),t.isManager?r("template",{slot:"extra"},[r("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(r){return t.removeMember(e.id)}}},[t._v("移除成员")])],1):t._e(),r("el-descriptions-item",{attrs:{label:"用户名"}},[t._v(t._s(e.userName))]),r("el-descriptions-item",{attrs:{label:"真实姓名"}},[t._v(t._s(e.trueName))]),r("el-descriptions-item",{attrs:{label:"手机号"}},[t._v(t._s(e.phone))]),r("el-descriptions-item",{attrs:{label:"邮箱"}},[r("el-tag",{attrs:{size:"small"}},[t._v(t._s(e.email))])],1),r("el-descriptions-item",{attrs:{label:"创建日期"}},[t._v(" "+t._s(t.formatDate(e.createDate))+" ")])],2)}))],2)]),t.isManager?r("el-dialog",{attrs:{title:"小组信息修改",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{attrs:{model:t.groupForm}},[r("el-form-item",{attrs:{label:"小组名"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.groupForm.groupName,callback:function(e){t.$set(t.groupForm,"groupName",e)},expression:"groupForm.groupName"}})],1),r("el-form-item",{attrs:{label:"小组描述"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.groupForm.described,callback:function(e){t.$set(t.groupForm,"described",e)},expression:"groupForm.described"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{disabled:t.isSame},on:{click:t.handleCancel}},[t._v(" 取 消 ")]),r("el-button",{attrs:{type:"primary",disabled:t.isSame},on:{click:t.handleAlter}},[t._v(" 确 定 ")])],1)],1):t._e()],1):t._e()},s=[],i=(r("a434"),r("5deb")),a=r("78de"),l={name:"GroupDetail",components:{ShowWindow:i["a"]},computed:{cardStyle:function(){return this.$store.getters.getCardColorStyle},isManager:function(){var t=this.$store.getters.getLoginUser.id;return t===this.group.managerId},isSame:function(){return this.groupForm.groupName===this.group.groupName&&this.groupForm.described===this.group.described}},data:function(){return{group:null,groupForm:{groupName:"",described:""},dialogFormVisible:!1}},activated:function(){var t=this,e=this.$route.query.group;if(void 0===e.groupName){var r=this.$route.query.groupName;Object(a["f"])(r).then((function(e){200===e.code?(t.group=t.fixGroup(e.result),t.groupForm=JSON.parse(JSON.stringify(e.result))):t.$message.error("加载失败，请稍后重试")}))}else this.group=this.fixGroup(e),this.groupForm=JSON.parse(JSON.stringify(e))},methods:{handleCancel:function(){this.groupForm.groupName=this.group.groupName,this.groupForm.described=this.group.described,this.dialogFormVisible=!1},handleAlter:function(){var t=this,e={groupId:this.group.id,userId:this.$store.getters.getLoginUser.id,groupName:this.groupForm.groupName===this.group.groupName?null:this.groupForm.groupName,described:this.groupForm.described===this.group.described?null:this.groupForm.described};console.log(e),Object(a["a"])(e).then((function(e){200===e.code?t.$alert("修改成功"):t.$alert("修改失败,"+e.msg)}))},formatDate:function(t){return this.$formatDate(t)},fixGroup:function(t){for(var e=0;e<t.memberList.length;e++){var r=t.memberList[e];if(r.id===t.managerId){t.manager=r,t.memberList.splice(e,1);break}}return t},getInvitationCode:function(t){var e=this,r=this.$store.getters.getLoginUser.id;Object(a["g"])(t,r).then((function(t){console.log(t),200===t.code?e.$alert(t.result,"小组邀请码",{confirmButtonText:"确定"}):e.$message.error("出错了",t.msg)}))},removeMember:function(t){var e=this,r=this.group.id,o=this.$store.getters.getLoginUser.id;this.$alert("是否移除该成员","警告",{confirmButtonText:"确定",callback:function(s){Object(a["m"])(o,r,t).then((function(t){console.log(t),200===t.code?e.$message.success("移除成员"+t.result+"成功"):e.$message.error(t.msg)}))}})},dissolveGroup:function(){var t=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password",inputPattern:/^[_0-9a-z]{6,16}$/,inputErrorMessage:"密码格式不正确"}).then((function(e){var r=e.value,o=t.group.id,s=t.$store.getters.getLoginUser.id;Object(a["c"])(s,o,r).then((function(e){console.log(e),200===e.code?t.$message.success("解散小组"+t.group.groupName+"成功"):t.$message.error("解散小组失败,"+e.msg)}))})).catch((function(){t.$message({type:"info",message:"取消删除"})}))}}},n=l,c=r("2877"),u=Object(c["a"])(n,o,s,!1,null,"483c305a",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-4677dc9b.9c9aa0cb.js.map